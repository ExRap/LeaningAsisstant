"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AccessDependenciesPlugin = void 0;
const webpack_1 = require("webpack");
class AccessDependenciesPlugin {
    // constructor() {
    constructor(dependencies) {
        this.dependencies = dependencies;
    }
    apply(compiler) {
        compiler.hooks.compilation.tap("AccessDependenciesPlugin", (compilation) => {
            webpack_1.NormalModule.getCompilationHooks(compilation).beforeLoaders.tap("AccessDependenciesPlugin", (loader, normalModule) => {
                if (normalModule.resource &&
                    normalModule.resource.includes("node_modules")) {
                    const resource = normalModule.resource;
                    this.dependencies.push(resource);
                }
            });
        });
    }
}
exports.AccessDependenciesPlugin = AccessDependenciesPlugin;
